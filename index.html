<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Theme color for browser chrome -->
    <meta name="theme-color" content="#2c3e50" />
    <title>Aura – 氣息冥想</title>
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json" />
    <!-- Stylesheet -->
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div id="app">
      <!-- Breathing circle container -->
      <div id="circle-container">
        <div id="circle">
          <span id="phase-text">開始</span>
        </div>
        <div id="ratio-text">4‑7‑8</div>
      </div>
      <!-- Settings button -->
      <button id="settings-button" aria-label="設定">
        ⚙️
      </button>
    </div>

    <!-- Settings modal and overlay -->
    <div id="overlay"></div>
    <div id="settings-modal">
      <div class="modal-header">
        <div class="tabs">
          <button id="tab-three" class="tab active">三段式</button>
          <button id="tab-four" class="tab">四段式</button>
        </div>
      </div>
      <div class="modal-body">
        <!-- Duration inputs will be generated by JS -->
        <div id="duration-inputs" class="duration-inputs"></div>
        <!-- Practice time selection -->
        <div class="option-group">
          <label>練習時長：</label>
          <div class="practice-options">
            <button data-duration="60" class="practice-btn">1 分鐘</button>
            <button data-duration="180" class="practice-btn">3 分鐘</button>
            <button data-duration="300" class="practice-btn">5 分鐘</button>
            <button data-duration="0" class="practice-btn">無限</button>
          </div>
        </div>
        <!-- Background sound selection -->
        <div class="option-group">
          <label>背景音效：</label>
          <div class="sound-options">
            <button data-sound="none" class="sound-btn">無</button>
            <button data-sound="waves" class="sound-btn">海浪</button>
            <button data-sound="forest" class="sound-btn">森林</button>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button id="save-settings" class="save-btn">完成</button>
      </div>
    </div>

    <!-- Scripts -->
    <!-- Explicit relative paths prevent resolution issues under file:// scheme -->
    <script src="./audio.js"></script>
    <script src="./app.js"></script>
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('sw.js').catch((err) => {
            console.warn('Service worker registration failed', err);
          });
        });
      }
    </script>
  </body>
</html>